# プロトタイプガイドライン

## プロダクト名: グロースパック for LINE - スタンプカード機能

---

## ブランド設定

### カラーパレット

| 用途 | カラー名 | カラーコード |
|------|----------|--------------|
| Primary | Gold | #D4A853 |
| Secondary | Dark Gray | #2D2D2D |
| Accent/Success | Emerald | #10B981 |
| Warning | Orange | #FF6B35 |
| Background | Warm White | #FAFAF8 |
| Card Background | White | #FFFFFF |

### ランクカラー

| ランク | カラー名 | カラーコード |
|--------|----------|--------------|
| Bronze | Bronze | #CD7F32 |
| Silver | Silver | #C0C0C0 |
| Gold | Gold | #D4A853 |
| Platinum | Platinum | #E5E4E2 |

### 参考ブランド

- 高級感のあるアパレルブランド（ゴールドをアクセントに使用）
- LINEの緑はサブカラーとして使用（#06C755）

---

## 画面構成

### 画面一覧

| 画面名 | パス | 説明 | 状態シミュレーション |
|--------|------|------|---------------------|
| ホーム | /demo/home | スタンプカードメイン画面。現在のスタンプ数、ランク、進捗を表示 | なし |
| スタンプ獲得 | /demo/stamp-get | スタンプ獲得時の演出画面 | 自動遷移（3秒後） |
| ランクアップ | /demo/rank-up | ランク昇格時の演出画面（魅力的品質） | 自動遷移（5秒後） |
| 会員QRコード | /demo/qr-code | 店舗スタッフ向けの会員識別QRコード表示 | なし |
| ランク詳細 | /demo/rank-detail | 各ランクの特典内容と昇格条件を表示 | なし |
| 特典一覧 | /demo/benefits | 利用可能な特典を一覧表示 | なし |

### 画面遷移図

```
[ホーム] ←──────────────────────────┐
   │                                │
   ├─→ [会員QRコード] ──────────────┤
   │                                │
   ├─→ [ランク詳細] ────────────────┤
   │                                │
   ├─→ [特典一覧] ──────────────────┤
   │                                │
   └─→ [スタンプ獲得] → [ランクアップ] ┘
                          (条件付き)
```

### demoSteps設定

`demo-builder` で使用するステップ定義:

```typescript
const demoSteps = [
  { path: "/demo/home", label: "ホーム画面", step: 1 },
  { path: "/demo/qr-code", label: "会員QRコード", step: 2 },
  { path: "/demo/stamp-get", label: "スタンプ獲得", step: 3 },
  { path: "/demo/rank-up", label: "ランクアップ", step: 4 },
  { path: "/demo/rank-detail", label: "ランク詳細", step: 5 },
  { path: "/demo/benefits", label: "特典一覧", step: 6 },
];

const demoInfo = {
  title: "スタンプカード機能",
  subtitle: "グロースパック for LINE",
  primaryColor: "#D4A853",
};
```

---

## MVP機能仕様

### 機能1: ホーム画面（スタンプカード表示）

**概要**: 現在のスタンプ数、会員ランク、次のランクまでの進捗を一目で確認できるメイン画面

**ユーザーストーリー**: As a 顧客, I want to 現在のスタンプ状況とランクを一目で確認したい, So that 次の目標に向けてモチベーションが上がる

**UI要素**:
- ユーザー情報（名前、会員番号）
- 現在のランクバッジ（Bronze/Silver/Gold/Platinum）
- スタンプ数表示（円形プログレス）
- 次のランクまでの進捗バー
- クイックアクションボタン（QRコード表示、特典確認）

**レイアウト**:
```
┌─────────────────────────┐
│ ← スタンプカード        │
├─────────────────────────┤
│  👤 田中 美咲 様        │
│  会員No: 1234-5678      │
├─────────────────────────┤
│    ┌─────────────┐      │
│    │   [GOLD]    │      │
│    │   ★ 85 pt   │      │
│    │  ───────○   │      │
│    │ あと15ptで   │      │
│    │ Platinum!   │      │
│    └─────────────┘      │
├─────────────────────────┤
│  [QRコード]  [特典を見る] │
├─────────────────────────┤
│  📊 ランク特典を確認 →   │
└─────────────────────────┘
```

---

### 機能2: スタンプ獲得演出

**概要**: 店舗でスタンプを獲得した際の確認・演出画面

**ユーザーストーリー**: As a 顧客, I want to スタンプを獲得したことを視覚的に確認したい, So that 安心感と達成感を得られる

**UI要素**:
- 獲得スタンプ数のアニメーション表示
- 更新後の累計スタンプ数
- 次のランクまでの残りポイント
- ホームに戻るボタン

**動作フロー**:
1. 画面表示と同時にスタンプアイコンがスケールイン
2. 獲得ポイント数がカウントアップ表示
3. 累計ポイントが更新される
4. 3秒後に自動でホームに遷移（またはタップで即時遷移）

**状態シミュレーション**:
- タイプ: 自動更新
- トリガー: ページ表示後3秒
- 効果: ホーム画面に自動遷移

---

### 機能3: ランクアップ演出（魅力的品質）

**概要**: ランク昇格時の華やかな演出画面。ユーザーに達成感を提供する

**ユーザーストーリー**: As a 顧客, I want to ランクアップした瞬間を特別な体験として味わいたい, So that 次のランクも目指したくなる

**UI要素**:
- 「RANK UP!」タイトル（グロー効果付き）
- 新しいランクバッジ（スケールイン + シャイン）
- 紙吹雪エフェクト（confetti）
- 獲得特典の表示
- 祝福メッセージ

**動作フロー**:
1. 画面全体が暗転 → グラデーション背景にフェードイン
2. 「RANK UP!」テキストがバウンスイン
3. 新ランクバッジがスケールイン + グロー
4. 紙吹雪が画面上部から降り注ぐ
5. 獲得特典がスライドアップで表示
6. 5秒後にOKボタンでホームに遷移

**状態シミュレーション**:
- タイプ: 自動遷移
- トリガー: ページ表示後5秒（またはOKボタン押下）
- 効果: ホーム画面に遷移

---

### 機能4: 会員QRコード

**概要**: 店舗スタッフがスキャンするための会員識別QRコード

**ユーザーストーリー**: As a 顧客, I want to 会計時に簡単にQRコードを提示したい, So that スムーズにスタンプを貯められる

**UI要素**:
- 大きなQRコード（画面中央）
- 会員番号テキスト
- 画面輝度アップ表示（実際の実装では端末の輝度を上げる）
- 「スタッフに見せてください」の説明文

---

### 機能5: ランク詳細

**概要**: 各ランクの特典内容と昇格条件を一覧表示

**ユーザーストーリー**: As a 顧客, I want to 各ランクの特典と条件を確認したい, So that 目標を持ってスタンプを貯められる

**UI要素**:
- ランク一覧（Bronze → Silver → Gold → Platinum）
- 各ランクの特典内容
- 昇格に必要なスタンプ数
- 現在ランクのハイライト

**ランク定義**:

| ランク | 必要スタンプ | 特典 |
|--------|-------------|------|
| Bronze | 0 | 会員限定情報配信 |
| Silver | 30 | 5%OFFクーポン |
| Gold | 70 | 10%OFFクーポン + 誕生日特典 |
| Platinum | 100 | 15%OFFクーポン + 先行販売アクセス + 送料無料 |

---

### 機能6: 特典一覧

**概要**: 現在利用可能な特典を一覧表示

**ユーザーストーリー**: As a 顧客, I want to 今使える特典を確認したい, So that お得に買い物できる

**UI要素**:
- 特典カード一覧
- 各特典の内容・有効期限
- 「使用する」ボタン
- 利用済み/未使用のステータス

---

## デモ環境設定

### 表示設定

- **ビューポート**: スマホサイズ（375px × 812px）
- **フレーム**: iPhoneモックアップ（ノッチ、ステータスバー、ホームインジケーター付き）
- **サイドバー**: ステップナビゲーション + 進捗表示

### デモシナリオ

| ステップ | 画面 | 操作 | 期待結果 |
|---------|------|------|---------|
| 1 | ホーム画面 | 画面を確認 | 現在のスタンプ数（例: 68pt）とGoldランクが表示される |
| 2 | 会員QRコード | QRコードボタンをタップ | QRコードが大きく表示される |
| 3 | スタンプ獲得 | サイドバーからステップ3を選択 | スタンプ獲得アニメーション（+5pt）が再生される |
| 4 | ランクアップ | サイドバーからステップ4を選択 | ランクアップ演出（Gold→Platinum）が再生される |
| 5 | ランク詳細 | ランク詳細をタップ | 全ランクの特典一覧が表示される |
| 6 | 特典一覧 | 特典を見るをタップ | 利用可能な特典が表示される |

### アニメーション要件

| 画面 | アニメーションタイプ | 対象要素 | 説明 |
|------|---------------------|---------|------|
| ホーム | エントリー | カード全体 | フェードイン + スライドアップ (delay: 0.1s) |
| ホーム | プログレス | 円形プログレス | 0%から現在値までアニメーション |
| スタンプ獲得 | スケールイン | スタンプアイコン | type: spring, scale: 0→1 |
| スタンプ獲得 | カウントアップ | ポイント数 | 0から獲得値まで数値アニメーション |
| ランクアップ | バウンスイン | RANK UP!テキスト | type: spring, y: -50→0 |
| ランクアップ | グロー | ランクバッジ | boxShadow pulse animation |
| ランクアップ | パーティクル | 紙吹雪 | canvas-confetti ライブラリ使用 |
| QRコード | フェードイン | QRコード | opacity: 0→1, scale: 0.9→1 |

---

## 魅力的品質機能（Delighter）

**機能名**: ランクアップ演出

**説明**: ランク昇格時に華やかなアニメーション演出を行い、ユーザーに達成感と特別感を提供する。スタンプを貯め続けるモチベーションを高める重要な体験。

**実装ノート**:
- Framer Motionのspringアニメーションを活用
- canvas-confettiライブラリで紙吹雪エフェクト
- バックグラウンドグラデーションで高級感を演出
- モバイルではnavigator.vibrate()でバイブレーション

**ビジュアル処理**:
- グラデーション: from-[#1a1a2e] via-[#16213e] to-[#0f3460]（ダークブルー系）
- ランクバッジグロー: 各ランクカラーの30%透明度でシャドウ
- アイコン: Crown, Star, Sparkles（lucide-react）
- アニメーション: spring + stagger + particle

**演出タイムライン**:
```
0.0s - 背景フェードイン
0.3s - "RANK UP!" テキスト バウンスイン
0.6s - 新ランクバッジ スケールイン + グロー開始
1.0s - 紙吹雪エフェクト開始
1.5s - 特典テキスト スライドアップ
3.0s - OKボタン フェードイン
```

---

## データモック

### ユーザーデータ

```typescript
const mockUser = {
  name: "田中 美咲",
  memberId: "1234-5678",
  currentStamps: 68,
  currentRank: "Gold",
  nextRank: "Platinum",
  stampsToNextRank: 32,
  joinDate: "2024-06-15",
};
```

### ランクデータ

```typescript
const ranks = [
  { id: "bronze", name: "Bronze", requiredStamps: 0, color: "#CD7F32" },
  { id: "silver", name: "Silver", requiredStamps: 30, color: "#C0C0C0" },
  { id: "gold", name: "Gold", requiredStamps: 70, color: "#D4A853" },
  { id: "platinum", name: "Platinum", requiredStamps: 100, color: "#E5E4E2" },
];
```

### 特典データ

```typescript
const benefits = [
  {
    id: 1,
    title: "10%OFFクーポン",
    description: "全商品10%OFF",
    validUntil: "2025-02-28",
    rank: "Gold",
    used: false,
  },
  {
    id: 2,
    title: "誕生日特典",
    description: "バースデークーポン 20%OFF",
    validUntil: "2025-01-31",
    rank: "Gold",
    used: false,
  },
];
```
